# this code was partially generated by AI (gemini)
# This workflow will build a Go project and deploy it to GitHub Pages

name: Go Build and Deploy

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:

  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4

    - name: Set up Go
      uses: actions/setup-go@v4
      with:
        go-version: '1.22.5'  # Adjust if needed

    - name: Build the project
      run: go build -o dino  # Assuming your binary is named 'dino'

  deploy:
    runs-on: ubuntu-latest
    needs: build  # This job depends on the successful completion of 'build'
    steps:
      - uses: actions/checkout@v4  # Checkout the repository again

      - name: Configure Git user for deployment
        run: |
          git config --global user.name 'GitHub Actions'
          git config --global user.email 'actions@github.com'

      - name: Deploy to GitHub Pages (assuming the built files are in root)
        uses: actions/deploy-pages@v4
        with:
          source: './public'  # Deploy all files from the root of your repository
          token: ${{ secrets.GITHUB_TOKEN }}
          branch: gh-pages  # Deploy to the 'gh-pages' branch

# Optional: Configure a custom domain (if applicable)
# - name: Configure custom domain (optional)
#   uses: peaceiris/actions-gh-pages@v3
#   with:
#     github_domain: 'your-custom-domain.com'
#     public_dir: '.'  # Set this to the directory containing your built files
